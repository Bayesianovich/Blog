<article class="post-detail">
  <!-- Immersive Header (Hidden by default, shown in immersive mode) -->
  <!-- Removed immersive-header div since we use the main banner now -->

  <div class="post-content">
    <%- page.content %>
  </div>

  <div class="post-footer">
    <!-- Footer content if needed, e.g. Share, Previous/Next -->
    
    <!-- Giscus Comments -->
    <div id="comments" style="margin-top: 50px;">
      <script src="https://giscus.app/client.js"
        data-repo="Bayesianovich/Blog_comment"
        data-repo-id="R_kgDOQ8Miig"
        data-category="Announcements"
        data-category-id="DIC_kwDOQ8Miis4C1G63"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
      </script>
    </div>
  </div>
</article>

<script>
  function toggleImmersiveMode() {
    document.body.classList.toggle('immersive-mode');
    var btn = document.getElementById('immersive-toggle');
    var icon = btn.querySelector('i');
    
    if (document.body.classList.contains('immersive-mode')) {
      icon.classList.remove('fa-expand');
      icon.classList.add('fa-compress');
      btn.innerHTML = '<i class="fas fa-compress"></i> Exit Immersive';
    } else {
      icon.classList.remove('fa-compress');
      icon.classList.add('fa-expand');
      btn.innerHTML = '<i class="fas fa-expand"></i> Immersive Reading';
    }
  }
</script>
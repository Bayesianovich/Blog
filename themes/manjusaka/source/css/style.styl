:root
  --bg-body: #f0f2f5
  --bg-card: #ffffff
  --text-main: #555
  --text-title: #333
  --text-meta: #666
  --text-link: #333
  --text-link-hover: #4caf50
  --border-color: #e1e4e8
  --accent-color: #4caf50
  --shadow: 0 2px 8px rgba(0,0,0,0.05)
  --dot-bg: #ccc
  --dot-container-bg: rgba(0,0,0,0.05)

/* Default Dark Mode (if preferred) */
@media (prefers-color-scheme: dark)
  :root
    --bg-body: #000
    --bg-card: #111
    --text-main: #ddd
    --text-title: #fff
    --text-meta: #888
    --text-link: #fff
    --text-link-hover: #4caf50
    --border-color: #333
    --accent-color: #4caf50
    --shadow: none
    --dot-bg: #555
    --dot-container-bg: rgba(0,0,0,0.5)

:root.dark-mode
  --bg-body: #000
  --bg-card: #111
  --text-main: #ddd
  --text-title: #fff
  --text-meta: #888
  --text-link: #fff
  --text-link-hover: #4caf50
  --border-color: #333
  --accent-color: #4caf50
  --shadow: none
  --dot-bg: #555
  --dot-container-bg: rgba(0,0,0,0.5)

:root.light-mode
  --bg-body: #f0f2f5
  --bg-card: #ffffff
  --text-main: #555
  --text-title: #333
  --text-meta: #666
  --text-link: #333
  --text-link-hover: #4caf50
  --border-color: #e1e4e8
  --accent-color: #4caf50
  --shadow: 0 2px 8px rgba(0,0,0,0.05)
  --dot-bg: #ccc
  --dot-container-bg: rgba(0,0,0,0.05)

body
  background: var(--bg-body)
  color: var(--text-main)
  font-family: "LXGW WenKai GB Screen", "LXGW WenKai Screen", sans-serif
  margin: 0
  padding: 0
  transition: background 0.3s, color 0.3s

a
  color: var(--text-link)
  text-decoration: none
  &:hover
    color: var(--text-link-hover)

#container
  max-width: 1200px
  margin: 0 auto
  padding: 20px

/* Header */
#header
  background: var(--bg-card)
  padding: 20px 0
  border-bottom: 1px solid var(--border-color)
  margin-bottom: 30px
  transition: background 0.3s, border-color 0.3s

.header-inner
  display: flex
  justify-content: space-between
  align-items: center
  max-width: 1200px
  margin: 0 auto
  padding: 0 20px

/* Header Logo Area */
.logo-container
  display: flex
  align-items: center
  gap: 15px

.header-avatar
  width: 40px
  height: 40px
  border-radius: 50%
  border: 2px solid var(--border-color)
  object-fit: cover

#logo
  font-size: 20px
  font-weight: bold
  color: var(--text-title)
  text-decoration: none

/* Search Modal */
.search-modal
  display: none
  position: fixed
  z-index: 1000
  left: 0
  top: 0
  width: 100%
  height: 100%
  background-color: rgba(0,0,0,0.6)
  backdrop-filter: blur(5px)

.search-modal-content
  background-color: var(--bg-card)
  margin: 100px auto
  padding: 0
  border-radius: 12px
  width: 60%
  max-width: 700px
  box-shadow: 0 5px 25px rgba(0,0,0,0.2)
  overflow: hidden
  animation: slideDown 0.3s

@keyframes slideDown
  from { transform: translateY(-30px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }

.search-header
  display: flex
  align-items: center
  padding: 20px
  border-bottom: 1px solid var(--border-color)

.search-icon
  color: var(--text-meta)
  font-size: 18px
  margin-right: 15px

#search-input
  flex: 1
  border: none
  background: none
  font-size: 18px
  color: var(--text-title)
  outline: none

.close-btn
  color: var(--text-meta)
  font-size: 28px
  font-weight: bold
  cursor: pointer
  margin-left: 15px
  &:hover
    color: var(--text-title)

.search-results
  max-height: 400px
  overflow-y: auto
  padding: 10px 0

.search-item
  padding: 15px 20px
  border-bottom: 1px solid var(--border-color)
  &:last-child
    border-bottom: none
  &:hover
    background: var(--bg-body)

.search-title
  display: block
  font-size: 16px
  font-weight: bold
  color: var(--accent-color)
  margin-bottom: 5px
  &:hover
    text-decoration: underline

.search-content
  font-size: 13px
  color: var(--text-meta)
  line-height: 1.5
  margin: 0
  display: -webkit-box
  -webkit-line-clamp: 2
  -webkit-box-orient: vertical
  overflow: hidden

.no-result
  padding: 20px
  text-align: center
  color: var(--text-meta)

/* Responsive Search */
@media (max-width: 600px)
  .search-modal-content
    width: 90%
    margin: 50px auto

/* Navigation Dropdown */
.nav-item
  position: relative
  display: flex
  align-items: center

.dropdown-toggle
  display: flex
  align-items: center
  gap: 5px
  cursor: pointer

.dropdown-toggle .fa-chevron-down
  font-size: 10px
  transition: transform 0.3s

.nav-item:hover .dropdown-toggle .fa-chevron-down
  transform: rotate(180deg)

.nav-dropdown
  position: absolute
  top: 100%
  left: 50%
  transform: translateX(-50%) translateY(10px)
  background: var(--bg-card)
  min-width: 140px
  padding: 10px 0
  border-radius: 8px
  box-shadow: var(--shadow)
  opacity: 0
  visibility: hidden
  transition: all 0.3s
  z-index: 100
  margin-top: 10px

/* Arrow for dropdown */
.nav-dropdown::before
  content: ''
  position: absolute
  top: -6px
  left: 50%
  transform: translateX(-50%)
  border-width: 0 6px 6px 6px
  border-style: solid
  border-color: transparent transparent var(--bg-card) transparent

.nav-item:hover .nav-dropdown
  opacity: 1
  visibility: visible
  transform: translateX(-50%) translateY(0)

.nav-dropdown.right-aligned
  left: auto
  right: 0
  transform: translateY(10px)

.nav-item:hover .nav-dropdown.right-aligned
  transform: translateY(0)

.nav-dropdown.right-aligned::before
  left: auto
  right: 15px
  transform: none

.dropdown-item
  display: block
  padding: 10px 20px
  color: var(--text-meta)
  font-size: 14px
  transition: all 0.2s
  display: flex
  align-items: center
  gap: 8px
  white-space: nowrap
  &:hover
    background: var(--bg-body)
    color: var(--accent-color)
    text-decoration: none

/* Header specific tweaks for dropdown */
#main-nav
  display: flex
  align-items: center

#main-nav > .main-nav-link, #main-nav > .nav-item
  margin-left: 20px

#main-nav .main-nav-link
  color: var(--text-meta)
  font-size: 14px
  &:hover
    color: var(--text-title)

.nav-item .main-nav-link
  margin-left: 0

/* Layout */
#main-wrap
  display: flex
  gap: 30px

#main
  flex: 1

/* Sidebar */
#sidebar
  width: 280px
  flex-shrink: 0

.widget-wrap
  background: var(--bg-card)
  border-radius: 8px
  padding: 20px
  margin-bottom: 30px
  box-shadow: var(--shadow)
  transition: background 0.3s, box-shadow 0.3s

.widget-title
  margin-top: 0
  font-size: 16px
  border-bottom: 1px solid var(--border-color)
  padding-bottom: 10px
  margin-bottom: 15px
  color: var(--text-title)
  i
    margin-right: 8px
    color: #f44336 /* Red icon like screenshot */

/* Announcement Widget */
.announcement-content
  color: var(--text-main)
  font-size: 14px
  line-height: 1.5
  transition: opacity 0.5s ease-in-out
  min-height: 60px /* Prevent layout jump */
  display: flex
  align-items: center

/* Profile Card Specifics */
.profile-card
  text-align: center
  padding: 30px 20px

.profile-avatar img
  width: 100px
  height: 100px
  border-radius: 50%
  margin-bottom: 15px
  border: 3px solid var(--border-color)

.profile-name
  font-size: 20px
  font-weight: bold
  margin-bottom: 5px
  color: var(--text-title)

.profile-bio
  color: var(--text-meta)
  font-size: 14px
  margin-bottom: 20px

.profile-stats
  display: flex
  justify-content: space-around
  margin-bottom: 25px
  padding: 0 10px

.stat-item
  display: flex
  flex-direction: column
  align-items: center

.stat-count
  font-weight: bold
  font-size: 18px
  color: var(--text-title)

.stat-label
  font-size: 12px
  color: var(--text-meta)
  margin-bottom: 5px

.profile-follow
  margin-bottom: 20px

.follow-btn
  display: block
  background: var(--accent-color)
  color: #fff
  padding: 10px 0
  border-radius: 5px
  text-align: center
  font-weight: bold
  transition: background 0.2s
  &:hover
    background: #43a047
    color: #fff

.profile-social
  display: flex
  justify-content: center
  gap: 20px
  a
    color: var(--text-meta)
    font-size: 18px
    transition: color 0.2s
    &:hover
      color: var(--text-title)

/* Categories Widget */
.categories-widget ul
  list-style: none
  padding: 0
  margin: 0

.categories-widget li
  display: flex
  justify-content: space-between
  padding: 8px 0
  border-bottom: 1px solid var(--border-color)
  &:last-child
    border-bottom: none
  a
    color: var(--text-meta)
    transition: color 0.2s
    &:hover
      color: var(--text-title)
  .category-count
    color: var(--text-meta)
    font-size: 12px
    background: var(--bg-body)
    padding: 2px 8px
    border-radius: 10px

/* Tags Widget */
.tag-cloud a
  display: inline-block
  margin: 0 8px 8px 0
  transition: all 0.2s
  &:hover
    text-decoration: none
    transform: scale(1.1)
    text-shadow: 0 0 5px rgba(0,0,0,0.1)

/* Website Info Widget */
.website-info
  font-size: 14px

.info-item
  display: flex
  justify-content: space-between
  padding: 8px 0
  color: var(--text-meta)

.info-label
  color: var(--text-meta)

.info-value
  color: var(--text-main)

/* Recent Posts Widget */
.recent-posts ul
  list-style: none
  padding: 0
  margin: 0

.recent-posts li
  display: flex
  gap: 12px
  margin-bottom: 20px
  &:last-child
    margin-bottom: 0

.recent-posts .item-thumbnail
  width: 60px
  height: 60px
  flex-shrink: 0
  border-radius: 4px
  overflow: hidden
  img
    width: 100%
    height: 100%
    object-fit: cover

.recent-posts .item-inner
  display: flex
  flex-direction: column
  justify-content: center

.recent-posts .item-title
  font-size: 14px
  margin-bottom: 5px
  line-height: 1.4
  color: var(--text-main)
  &:hover
    color: var(--accent-color)

.recent-posts time
  font-size: 12px
  color: var(--text-meta)

/* Featured Widget (Red Box Area) */
#featured-container
  position: relative
  margin-bottom: 30px
  background: var(--bg-card)
  border-radius: 8px
  overflow: hidden
  border: 1px solid var(--border-color)
  padding-right: 30px /* Make room for dots */
  box-shadow: var(--shadow)

#featured-post
  /* margin-bottom handled by container */

.feature-card
  display: flex
  height: 180px /* Smaller height as per screenshot */
  transition: opacity 0.5s ease-in-out
  width: 100%

.fade-in
  animation: fadeIn 0.5s

@keyframes fadeIn
  from { opacity: 0; }
  to { opacity: 1; }

.feature-cover
  width: 180px /* Square image */
  height: 100%
  background-size: cover
  background-position: center
  flex-shrink: 0

.feature-info
  flex-grow: 1
  padding: 20px 30px
  display: flex
  flex-direction: column
  justify-content: center
  position: relative

.featured-dots
  position: absolute
  right: 10px
  top: 50%
  transform: translateY(-50%)
  display: flex
  flex-direction: column
  gap: 8px
  z-index: 10
  padding: 5px
  background: var(--dot-container-bg)
  border-radius: 10px

.dot
  width: 8px
  height: 8px
  background: var(--dot-bg)
  border-radius: 50%
  cursor: pointer
  transition: all 0.3s

.dot.active
  background: var(--accent-color)
  transform: scale(1.2)
  box-shadow: 0 0 5px rgba(76, 175, 80, 0.5)

.feature-date
  color: var(--text-meta)
  font-size: 13px
  margin-bottom: 8px

.feature-title
  font-size: 20px
  font-weight: bold
  margin-bottom: 10px
  color: var(--text-title)
  line-height: 1.3
  &:hover
    color: var(--accent-color)

.feature-excerpt
  color: var(--text-meta)
  line-height: 1.5
  font-size: 13px
  display: -webkit-box
  -webkit-line-clamp: 3
  -webkit-box-orient: vertical
  overflow: hidden
  -webkit-box-orient: vertical
  overflow: hidden

/* Series Bar */
.series-bar
  display: flex
  gap: 20px
  margin-bottom: 30px
  
.series-item
  flex: 1
  background: var(--bg-card)
  border-radius: 8px
  padding: 20px
  display: flex
  align-items: center
  gap: 15px
  box-shadow: var(--shadow)
  border: 1px solid var(--border-color)
  transition: all 0.3s
  &:hover
    transform: translateY(-5px)
    border-color: var(--accent-color)
    box-shadow: 0 5px 15px rgba(0,0,0,0.1)
    text-decoration: none

.series-icon
  width: 50px
  height: 50px
  border-radius: 12px
  display: flex
  align-items: center
  justify-content: center
  font-size: 24px
  color: #fff
  flex-shrink: 0

.weekly-icon
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)

.algo-icon
  background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%)

.series-info
  display: flex
  flex-direction: column

.series-title
  font-size: 18px
  font-weight: bold
  color: var(--text-title)
  margin-bottom: 5px

.series-desc
  font-size: 13px
  color: var(--text-meta)

/* Subcategory Navigation */
.subcategory-nav
  display: flex
  flex-wrap: wrap
  gap: 15px
  margin-bottom: 30px
  padding: 20px
  background: var(--bg-card)
  border-radius: 8px
  border: 1px solid var(--border-color)

.subcat-item
  display: flex
  align-items: center
  gap: 8px
  padding: 8px 16px
  background: var(--bg-body)
  border-radius: 20px
  color: var(--text-main)
  font-size: 14px
  transition: all 0.3s
  &:hover
    background: var(--accent-color)
    color: #fff
    text-decoration: none
    .subcat-count
      background: rgba(255,255,255,0.3)
      color: #fff

.subcat-count
  font-size: 12px
  background: var(--bg-card)
  color: var(--text-meta)
  padding: 2px 8px
  border-radius: 10px
  transition: all 0.3s

.archive-tags
  margin-top: 5px
  display: flex
  gap: 8px
  flex-wrap: wrap

.archive-tag-item
  font-size: 12px
  color: var(--text-meta)
  background: var(--bg-body)
  padding: 2px 6px
  border-radius: 4px

/* Post List */
.post-card
  background: var(--bg-card)
  border-radius: 8px
  overflow: hidden
  display: flex
  margin-bottom: 30px
  height: 250px
  box-shadow: var(--shadow)
  transition: background 0.3s, box-shadow 0.3s

.post-card.layout-left
  flex-direction: row

.post-card.layout-right
  flex-direction: row-reverse

.post-cover
  width: 40%
  overflow: hidden
  img
    width: 100%
    height: 100%
    object-fit: cover
    transition: transform 0.3s

.post-card:hover .post-cover img
  transform: scale(1.05)

.post-info
  width: 60%
  padding: 30px
  display: flex
  flex-direction: column
  justify-content: center

.post-title
  margin: 0 0 10px 0
  font-size: 20px
  a
    color: var(--text-title)
    &:hover
      color: var(--accent-color)

.post-meta
  font-size: 12px
  color: var(--text-meta)
  margin-bottom: 15px
  display: flex
  align-items: center
  flex-wrap: wrap
  gap: 10px
  line-height: 1.5

.meta-item
  display: flex
  align-items: center
  gap: 6px

.meta-separator
  color: var(--border-color)

.meta-sub-separator
  margin: 0 4px
  font-size: 10px
  color: var(--text-meta)

.post-meta a
  color: var(--text-meta)
  transition: color 0.2s
  &:hover
    color: var(--text-title)

.post-excerpt
  color: var(--text-meta)
  font-size: 14px
  line-height: 1.6

/* Archive/Timeline Styles */
.archive-main-wrap
  background: var(--bg-body)
  padding: 20px
  transition: background 0.3s

.archive-header
  font-size: 24px
  margin-bottom: 40px
  display: flex
  align-items: center
  gap: 10px
  color: var(--text-main)
  i
    color: var(--accent-color)

.archive-timeline
  position: relative
  padding-left: 20px
  border-left: 2px solid var(--accent-color)
  margin-left: 10px

.archive-year
  position: relative
  margin-bottom: 30px
  margin-top: 20px

.archive-year-dot
  position: absolute
  left: -27px /* Adjust based on border width and padding */
  top: 5px
  width: 12px
  height: 12px
  background: var(--bg-body)
  border: 2px solid #00bcd4
  border-radius: 50%
  z-index: 2

.archive-year-text
  font-size: 24px
  font-weight: bold
  color: var(--text-main)
  margin-left: 15px

.archive-item
  position: relative
  margin-bottom: 30px
  padding-left: 15px

.archive-item-dot
  position: absolute
  left: -27px
  top: 25px
  width: 12px
  height: 12px
  background: var(--bg-body)
  border: 2px solid var(--accent-color)
  border-radius: 50%
  z-index: 2

.archive-item-content
  display: flex
  gap: 15px
  align-items: center

.archive-thumbnail
  width: 120px
  height: 80px
  flex-shrink: 0
  border-radius: 6px
  overflow: hidden
  img
    width: 100%
    height: 100%
    object-fit: cover

.archive-info
  display: flex
  flex-direction: column
  justify-content: center

.archive-date
  font-size: 14px
  color: var(--text-meta)
  margin-bottom: 5px
  i
    margin-right: 5px

.archive-title
  font-size: 16px
  font-weight: 500
  color: var(--text-main)
  transition: color 0.2s
  &:hover
    color: var(--accent-color)

/* Post Banner Full Width */
.post-banner
  width: 100%
  height: 60vh
  background-size: cover
  background-position: center
  position: relative
  margin-bottom: 30px

.post-banner-overlay
  position: absolute
  top: 0
  left: 0
  width: 100%
  height: 100%
  background: rgba(0, 0, 0, 0.3)
  display: flex
  flex-direction: column
  justify-content: flex-end /* Align bottom like screenshot */
  color: #fff
  text-shadow: 0 2px 4px rgba(0,0,0,0.5)

.banner-content
  max-width: 1200px
  width: 100%
  margin: 0 auto
  padding: 0 20px 40px 20px /* Padding bottom for spacing */
  box-sizing: border-box

.post-banner .post-title
  font-size: 36px
  font-weight: bold
  margin-bottom: 15px
  color: #fff
  display: flex
  align-items: center
  gap: 10px

.post-banner .post-title i
  font-size: 24px
  opacity: 0.8

/* Transparent Header on Post Pages */
body.is-post #header
  position: absolute
  top: 0
  left: 0
  width: 100%
  background: transparent
  border-bottom: none
  z-index: 10

body.is-post #logo
  color: #fff
  text-shadow: 0 1px 3px rgba(0,0,0,0.5)

body.is-post #main-nav a
  color: #fff
  text-shadow: 0 1px 3px rgba(0,0,0,0.5)
  &:hover
    color: var(--accent-color)

/* Post Detail Body */
.post-detail
  background: var(--bg-card)
  border-radius: 8px
  padding: 40px
  box-shadow: var(--shadow)
  transition: background 0.3s, box-shadow 0.3s

/* Override previous post-banner inside post-detail */
/* We moved banner out, so no need to style it inside .post-detail */

.post-meta-header
  font-size: 14px
  color: #eee

.meta-row
  display: flex
  align-items: center
  flex-wrap: wrap
  gap: 10px
  margin-bottom: 10px

.meta-row.stats-row
  font-size: 13px
  opacity: 0.9

.meta-row a
  color: #eee
  border-bottom: 1px solid transparent
  transition: all 0.2s
  &:hover
    color: #fff
    border-bottom-color: #fff

.meta-arrow
  font-size: 12px
  margin: 0 5px
  opacity: 0.8

.meta-dot
  margin: 0 5px
  font-weight: bold

/* Post Content Styling */
.post-content
  padding: 40px
  color: var(--text-main)
  line-height: 1.8
  font-size: 16px

  /* Typography */
  h1, h2, h3, h4, h5, h6
    color: var(--text-title)
    margin-top: 30px
    margin-bottom: 20px
    font-weight: bold
    line-height: 1.4

  h2
    font-size: 24px
    border-bottom: 1px solid var(--border-color)
    padding-bottom: 10px

  h3
    font-size: 20px
    
  p
    margin-bottom: 20px
    text-align: justify

  a
    color: var(--accent-color)
    border-bottom: 1px solid transparent
    transition: all 0.2s
    &:hover
      text-decoration: none
      border-bottom-color: var(--accent-color)

  /* Blockquote / Callout (Green Box) */
  blockquote
    margin: 20px 0
    padding: 15px 20px
    background: rgba(76, 175, 80, 0.1) /* Light green bg */
    border-left: 4px solid var(--accent-color)
    border-radius: 4px
    color: var(--text-main)
    p
      margin: 0

  /* Lists */
  ul, ol
    margin-bottom: 20px
    padding-left: 20px
    li
      margin-bottom: 5px

  /* Images */
  img
    max-width: 100%
    border-radius: 8px
    display: block
    margin: 30px auto
    box-shadow: var(--shadow)

  /* Code Blocks - Removed duplicate pre style */
  code
    background: rgba(255,255,255,0.1)
    padding: 2px 6px
    border-radius: 4px
    font-family: monospace
    color: var(--accent-color)

.post-footer
  padding: 20px 40px
  margin-top: 0 /* Reset margin */
  border-top: 1px solid var(--border-color)

.post-tags
  display: flex
  align-items: center
  flex-wrap: wrap
  gap: 10px
  i
    color: var(--text-meta)
    margin-right: 5px
  a
    color: var(--text-meta)
    background: var(--bg-body)
    padding: 4px 10px
    border-radius: 15px
    font-size: 13px
    transition: all 0.2s
    &:hover
      background: var(--accent-color)
      color: #fff
      text-decoration: none

/* Reward */
.reward-container
  text-align: center
  margin: 40px 0
  padding: 20px 0
  border-top: 1px solid var(--border-color)

.reward-button
  display: inline-flex
  align-items: center
  justify-content: center
  gap: 8px
  background: #d9534f
  color: #fff
  padding: 10px 25px
  border-radius: 25px
  cursor: pointer
  font-size: 16px
  transition: all 0.3s
  &:hover
    background: #c9302c
    transform: translateY(-2px)
    box-shadow: 0 4px 10px rgba(217, 83, 79, 0.4)

.reward-qr
  max-height: 0
  overflow: hidden
  margin-top: 0
  opacity: 0
  transition: all 0.5s ease-in-out

.reward-qr.active
  max-height: 500px
  margin-top: 20px
  opacity: 1
  transform: translateY(0)

.reward-message
  margin-bottom: 15px
  color: var(--text-meta)
  font-size: 14px

.reward-qr img
  max-width: 200px
  border-radius: 8px
  box-shadow: var(--shadow)
  border: 1px solid var(--border-color)

/* Responsive */
@media (max-width: 900px)
  #main-wrap
    flex-direction: column
  
  #sidebar
    width: 100%
  
  .feature-card
    flex-direction: column
    height: auto
  
  .feature-cover, .feature-info
    width: 100%
  
  .feature-cover
    height: 200px
  
  .post-card, .post-card.layout-right
    flex-direction: column
    height: auto
  
  .post-cover, .post-info
    width: 100%
  
  .post-cover
    height: 200px

/* Pagination */
#page-nav
  text-align: center
  margin-top: 40px
  margin-bottom: 20px

.page-number, .extend
  display: inline-block
  margin: 0 8px
  width: 45px
  height: 45px
  line-height: 45px
  text-align: center
  border-radius: 12px
  background: var(--bg-card)
  color: var(--text-meta)
  box-shadow: 0 4px 10px rgba(0,0,0,0.1)
  transition: all 0.3s
  font-size: 16px
  &:hover
    color: var(--text-title)
    transform: translateY(-2px)
    box-shadow: 0 6px 15px rgba(0,0,0,0.15)

.page-number.current
  background: var(--accent-color)
  color: #fff
  box-shadow: 0 4px 10px rgba(76, 175, 80, 0.4)
  font-weight: bold

.space
  color: var(--text-meta)
  font-size: 16px
  margin: 0 10px

/* Footer */
#footer
  background: transparent
  padding: 30px 0
  margin-top: 40px
  text-align: center
  color: var(--text-meta)
  font-size: 14px

.footer-inner
  max-width: 1200px
  margin: 0 auto

/* Immersive Mode Toggle Button */
#immersive-toggle
  background: rgba(255, 255, 255, 0.2)
  border: 1px solid rgba(255, 255, 255, 0.5)
  color: #fff
  padding: 8px 20px
  border-radius: 20px
  cursor: pointer
  font-size: 14px
  transition: all 0.3s
  display: inline-flex
  align-items: center
  gap: 8px
  backdrop-filter: blur(5px)
  margin-top: 10px
  &:hover
    background: var(--accent-color)
    border-color: var(--accent-color)
    transform: translateY(-2px)
    box-shadow: 0 4px 10px rgba(0,0,0,0.2)

/* Floating exit button for immersive mode */
body.immersive-mode #immersive-toggle
  position: fixed
  bottom: 30px
  right: 30px
  z-index: 1000
  background: rgba(0,0,0,0.7)
  color: #fff
  border: none
  padding: 12px 24px
  margin-top: 0
  box-shadow: 0 4px 12px rgba(0,0,0,0.3)
  &:hover
    background: var(--accent-color)
.immersive-header
  display: none
  text-align: center
  margin-bottom: 30px
  animation: fadeIn 0.5s

.immersive-header .post-title
  font-size: 32px
  font-weight: bold
  margin-bottom: 15px
  color: var(--text-title)

.immersive-header .post-meta-header
  justify-content: center
  color: var(--text-meta)

.immersive-header .meta-row
  justify-content: center

/* Immersive Mode Styles */
body.immersive-mode .immersive-header
  display: none /* Hide the simple header */

/* Show banner in immersive mode but adjust it */
body.immersive-mode .post-banner
  display: block !important
  height: 400px /* Reduced height for better reading */
  margin-bottom: 40px
  width: 100%
  max-width: 900px /* Match content width */
  margin-left: auto
  margin-right: auto
  border-radius: 8px
  overflow: hidden

/* Center content in immersive banner */
body.immersive-mode .post-banner-overlay
  align-items: center
  text-align: center

body.immersive-mode .post-banner .post-title
  justify-content: center

body.immersive-mode .meta-row
  justify-content: center

/* Hide other elements */
body.immersive-mode #header,
body.immersive-mode #sidebar,
body.immersive-mode #footer,
body.immersive-mode #page-nav
  display: none !important

body.immersive-mode #container
  max-width: 900px !important
  padding: 40px 20px

body.immersive-mode #main-wrap
  display: block

body.immersive-mode .post-detail
  box-shadow: none
  padding: 0
  background: transparent

body.immersive-mode .post-content
  font-size: 18px
  line-height: 2
  color: var(--text-title) /* Higher contrast */

/* Floating exit button for immersive mode */
body.immersive-mode #immersive-toggle
  position: fixed
  bottom: 30px
  right: 30px
  z-index: 1000
  background: rgba(0,0,0,0.7)
  color: #fff
  border: none
  padding: 12px 24px
  margin-top: 0
  box-shadow: 0 4px 12px rgba(0,0,0,0.3)
  &:hover
    background: var(--accent-color)

/* Back to Top Button */
#back-to-top
  position: fixed
  bottom: 30px
  right: 30px
  z-index: 999
  width: 45px
  height: 45px
  /* Glassmorphism Effect for Day Mode */
  background: rgba(255, 255, 255, 0.8)
  backdrop-filter: blur(10px)
  -webkit-backdrop-filter: blur(10px)
  border: 1px solid rgba(0, 0, 0, 0.05)
  color: var(--text-meta)
  border-radius: 12px
  text-align: center
  line-height: 45px
  font-size: 18px
  cursor: pointer
  box-shadow: 0 4px 10px rgba(0,0,0,0.1)
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1)
  opacity: 0
  visibility: hidden
  transform: translateY(20px)

  &:hover
    color: #fff
    background: var(--accent-color)
    border-color: var(--accent-color)
    transform: translateY(-5px)
    box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3)

  &.show
    opacity: 1
    visibility: visible
    transform: translateY(0)

/* Dark Mode Adaptation */
:root.dark-mode #back-to-top
  background: rgba(30, 30, 30, 0.8)
  border: 1px solid rgba(255, 255, 255, 0.1)
  color: #aaa
  box-shadow: 0 4px 10px rgba(0,0,0,0.3)
  
  &:hover
    background: var(--accent-color)
    color: #fff
    box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4)

/* Adjust position when immersive mode is active to avoid overlap */
body.immersive-mode #back-to-top
  bottom: 90px /* Position above the immersive exit button */
/* --- UI Polish & Functional Components --- */

/* 1. Font Smoothing */
body
  -webkit-font-smoothing: antialiased
  -moz-osx-font-smoothing: grayscale

/* 2. Custom Scrollbar */
::-webkit-scrollbar
  width: 8px
  height: 8px

::-webkit-scrollbar-track
  background: var(--bg-body)

::-webkit-scrollbar-thumb
  background: #ccc
  border-radius: 4px
  transition: background 0.3s
  &:hover
    background: var(--accent-color)

:root.dark-mode ::-webkit-scrollbar-thumb
  background: #555
  &:hover
    background: var(--accent-color)

/* 3. Card Hover Effects (Lift & Glow) */
.post-card, .widget-wrap, .feature-card, .series-item
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1) !important
  &:hover
    transform: translateY(-5px)
    box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important

:root.dark-mode .post-card:hover,
:root.dark-mode .widget-wrap:hover
  box-shadow: 0 10px 20px rgba(0,0,0,0.3) !important

/* 4. Image Fade-in Animation */
img
  opacity: 0
  transition: opacity 0.5s ease-in-out
img.loaded
  opacity: 1

/* 5. Reading Progress Bar */
#reading-progress-bar
  position: fixed
  top: 0
  left: 0
  height: 3px
  background: var(--accent-color)
  width: 0%
  z-index: 9999
  transition: width 0.1s ease
  box-shadow: 0 0 10px var(--accent-color)

/* 6. Clean Minimalist Code Blocks */
.highlight, pre
  position: relative
  background: #f6f8fa /* GitHub 浅色背景 */
  border-radius: 6px
  margin: 20px 0
  padding: 15px !important
  border: 1px solid #e1e4e8
  box-shadow: none

  /* 移除 Mac 风格按钮 */
  &::before
    display: none

  /* Copy Button - 调整位置 */
  .copy-btn
    position: absolute
    top: 8px
    right: 8px
    color: #6a737d
    cursor: pointer
    font-size: 14px
    padding: 4px 8px
    border-radius: 4px
    background: transparent
    transition: all 0.2s
    opacity: 0
    z-index: 10
    
    &:hover
      background: #e1e4e8
      color: #24292e
  
  /* 鼠标悬停代码块时才显示复制按钮 */
  &:hover .copy-btn
    opacity: 1

/* Dark Mode 适配 */
:root.dark-mode .highlight, 
:root.dark-mode pre
  background: #1f2428 /* GitHub Dark Dimmed 背景 */
  border-color: #30363d
  
:root.dark-mode .highlight .copy-btn
  color: #8b949e
  &:hover
    background: #30363d
    color: #c9d1d9

/* Reset nested highlight/pre styles */
.highlight .highlight, 
.highlight pre,
pre .highlight,
pre pre
  margin: 0 !important
  padding: 0 !important
  border: none !important
  background: transparent !important
  
  /* Hide duplicate copy buttons */
  .copy-btn
    display: none !important

  /* Copy Button */
  .copy-btn
    display: none !important

/* 7. TOC Widget Styles */
.toc-widget
  max-height: calc(100vh - 200px)
  overflow-y: auto
  padding-right: 10px
  
  ol
    list-style: none
    padding-left: 15px
    margin: 0
    
  .toc-item
    margin-bottom: 5px
    line-height: 1.4
    
  .toc-link
    color: var(--text-meta)
    font-size: 14px
    display: block
    padding: 2px 0
    transition: all 0.2s
    border-left: 2px solid transparent
    padding-left: 8px
    
    &:hover
      color: var(--text-title)
      
    &.active
      color: var(--accent-color)
      border-left-color: var(--accent-color)
      font-weight: bold
      background: linear-gradient(90deg, rgba(76,175,80,0.1) 0%, transparent 100%)

  .toc-child
    display: none
    padding-left: 10px
    
  .toc-item.active > .toc-child
    display: block

/* 8. Code highlight fixes */
.highlight
  overflow: auto
  table
    width: 100%
    border-spacing: 0
  td
    padding: 0
    border: none
  .gutter
    color: #666
    padding-right: 15px
    text-align: right
    border-right: 1px solid #444
  .code
    padding-left: 15px
    color: #abb2bf


/* 9. Contribution Chart */
.contribution-chart
  overflow: hidden /* Ensure image doesn't overflow container */
  position: relative

.contribution-chart img
  width: 100% /* Ensure image fits within container width */
  height: auto    /* Maintain aspect ratio */
  display: block
  transition: transform 0.3s ease
  &:hover
    transform: scale(1.02)
    opacity: 0.9

.contribution-modal
  display: none
  position: fixed
  z-index: 2000
  padding: 50px 20px
  left: 0
  top: 0
  width: 100%
  height: 100%
  overflow-x: auto
  overflow-y: auto
  background-color: rgba(0,0,0,0.9)
  backdrop-filter: blur(5px)
  box-sizing: border-box
  display: flex
  align-items: center
  justify-content: center

.modal-content
  margin: 0 auto
  display: block
  width: auto
  max-width: none
  max-height: calc(100vh - 120px)
  height: auto
  object-fit: contain
  border-radius: 8px /* Add rounded corners */
  box-shadow: 0 0 20px rgba(0,0,0,0.5) /* Add shadow for depth */
  animation: zoomIn 0.3s

@keyframes zoomIn
  from {transform: scale(0)}
  to {transform: scale(1)}

.close-modal
  position: absolute
  top: 15px
  right: 35px
  color: #f1f1f1
  font-size: 40px
  font-weight: bold
  transition: 0.3s
  cursor: pointer
  &:hover, &:focus
    color: #bbb
    text-decoration: none
    cursor: pointer

#caption
  margin: auto
  display: block
  width: 80%
  max-width: 700px
  text-align: center
  color: #ccc
  padding: 10px 0
  height: 150px

@media only screen and (max-width: 700px)
  .modal-content
    width: 100%

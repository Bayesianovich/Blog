function updateGiscusTheme(e){var t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:"light"===e?"light":"dark_dimmed"}}},"https://giscus.app")}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("theme-toggle"),t=e.querySelector("i"),o=localStorage.getItem("theme");(o?"dark"===o:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)?(document.documentElement.classList.remove("light-mode"),document.documentElement.classList.add("dark-mode"),document.body.classList.remove("light-mode"),document.body.classList.add("dark-mode"),t.classList.remove("fa-sun"),t.classList.add("fa-moon"),updateGiscusTheme("dark")):(document.documentElement.classList.remove("dark-mode"),document.documentElement.classList.add("light-mode"),document.body.classList.remove("dark-mode"),document.body.classList.add("light-mode"),t.classList.remove("fa-moon"),t.classList.add("fa-sun"),updateGiscusTheme("light")),e.addEventListener("click",function(){document.body.classList.contains("light-mode")?(document.documentElement.classList.remove("light-mode"),document.documentElement.classList.add("dark-mode"),document.body.classList.remove("light-mode"),document.body.classList.add("dark-mode"),localStorage.setItem("theme","dark"),t.classList.remove("fa-sun"),t.classList.add("fa-moon"),updateGiscusTheme("dark")):(document.documentElement.classList.remove("dark-mode"),document.documentElement.classList.add("light-mode"),document.body.classList.remove("dark-mode"),document.body.classList.add("light-mode"),localStorage.setItem("theme","light"),t.classList.remove("fa-moon"),t.classList.add("fa-sun"),updateGiscusTheme("light"))})}),console.log("Manjusaka theme loaded"),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("back-to-top");e&&(window.addEventListener("scroll",function(){300<window.scrollY?e.classList.add("show"):e.classList.remove("show")}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}))}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("img").forEach(function(e){e.complete?e.classList.add("loaded"):e.addEventListener("load",function(){e.classList.add("loaded")})});var o=document.getElementById("reading-progress-bar");o&&window.addEventListener("scroll",function(){var e=window.scrollY||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-document.documentElement.clientHeight;o.style.width=e/t*100+"%"});document.querySelectorAll(".highlight, pre").forEach(function(t){var o;t.querySelector(".copy-btn")||t.parentElement.classList.contains("highlight")||((o=document.createElement("div")).className="copy-btn",o.innerHTML='<i class="far fa-copy"></i>',o.title="Copy Code",o.addEventListener("click",function(){var e=(t.querySelector("td.code")?t.querySelector("td.code"):t).innerText;navigator.clipboard.writeText(e).then(function(){o.innerHTML='<i class="fas fa-check"></i>',setTimeout(function(){o.innerHTML='<i class="far fa-copy"></i>'},2e3)})}),t.appendChild(o))});var e=document.querySelectorAll(".toc-link"),n=document.querySelectorAll(".post-content h1, .post-content h2, .post-content h3, .post-content h4");0<e.length&&0<n.length&&window.addEventListener("scroll",function(){var t,o=window.scrollY+100,d=null;n.forEach(function(e){e.offsetTop<=o&&(d=e)}),d&&(t=d.id||d.getAttribute("id"))&&e.forEach(function(e){e.classList.remove("active"),e.parentElement.classList.remove("active"),decodeURIComponent(e.getAttribute("href")).substring(1)===t&&(e.classList.add("active"),e.parentElement.classList.add("active"))})})});